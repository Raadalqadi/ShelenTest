{"version":3,"file":"static/js/580.4a2747a6.chunk.js","mappings":"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","sources":["API.tsx","Dashboard/Components/AddUserForm.tsx"],"sourcesContent":["export const ApiHost = `https://localhost:5280`\r\n/* export const ApiHost = `` */","import { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useOutletContext, useNavigate } from \"react-router-dom\";\r\nimport { ApiHost } from \"../../API\";\r\n\r\nconst AddUserForm = () => {\r\n    const { getUsers } = useOutletContext<any>();\r\n    const navigate = useNavigate(); // ✅ استدعاء useNavigate\r\n    const [btnEnabel , setBtnEnabel] = useState(false);\r\n\r\n    const [formData, setFormData] = useState({\r\n        fullname: \"\",\r\n        user_name: \"\",\r\n        phone_number: \"\",\r\n        password: \"\",\r\n        confirmPassword: \"\",\r\n        role: \"\",\r\n        is_active: true\r\n    });\r\n\r\n    const [error, setError] = useState(\"\");\r\n\r\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n        setFormData({ ...formData, [e.target.name]: e.target.value });\r\n        setError(\"\"); // مسح الأخطاء عند التحديث\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setBtnEnabel(true);\r\n\r\n        if (formData.password.length < 8) {\r\n            setError(\"يجب أن تكون كلمة المرور 8 أحرف على الأقل\");\r\n            return;\r\n        }\r\n        if (formData.password !== formData.confirmPassword) {\r\n            setError(\"كلمة المرور غير متطابقة\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const token = localStorage.getItem(\"shlen_token\");\r\n\r\n            await axios.post(`${ApiHost}/api/Users/add`, {\r\n                fullname: formData.fullname,\r\n                user_name: formData.user_name,\r\n                phone_number: formData.phone_number,\r\n                password: formData.password,\r\n                role: formData.role,\r\n                is_active: formData.is_active\r\n            },\r\n                {\r\n                    headers: {\r\n                        Authorization: `Bearer ${token}`,\r\n                        \"Content-Type\": \"application/json\",\r\n                    },\r\n                });\r\n\r\n            alert(\"تمت إضافة المستخدم بنجاح\");\r\n            getUsers();\r\n            setFormData({\r\n                fullname: \"\",\r\n                user_name: \"\",\r\n                phone_number: \"\",\r\n                password: \"\",\r\n                confirmPassword: \"\",\r\n                role: \"\",\r\n                is_active: true\r\n            });\r\n\r\n            navigate(-1); // ✅ الرجوع إلى الصفحة السابقة بعد الإضافة بنجاح\r\n        } catch (error) {\r\n            console.error(\"خطأ أثناء الإضافة:\", error);\r\n            setError(\"فشل في إضافة المستخدم، تحقق من الاتصال بالخادم\");\r\n        }finally{\r\n            setBtnEnabel(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <form className=\"add-user-form\" onSubmit={handleSubmit}>\r\n            <h4>أضف بيانات المستخدم</h4>\r\n\r\n            <div className=\"input-group\">\r\n                <input type=\"text\" name=\"fullname\" value={formData.fullname} onChange={handleChange} placeholder=\"أضف الاسم الكامل\" required />\r\n            </div>\r\n\r\n            <div className=\"input-group\">\r\n                <input type=\"text\" name=\"user_name\" value={formData.user_name} onChange={handleChange} placeholder=\"أضف اسم المستخدم\" required />\r\n            </div>\r\n\r\n            <div className=\"input-group\">\r\n                <input type=\"text\" name=\"phone_number\" value={formData.phone_number} onChange={handleChange} placeholder=\"أضف رقم الهاتف\" required />\r\n            </div>\r\n\r\n            <div className=\"input-group\">\r\n                <input type=\"password\" name=\"password\" value={formData.password} onChange={handleChange} placeholder=\"أضف كلمة السر\" required />\r\n                <label>يجب أن لا تقل كلمة المرور عن 8 أحرف</label>\r\n            </div>\r\n\r\n            <div className=\"input-group\">\r\n                <input type=\"password\" name=\"confirmPassword\" value={formData.confirmPassword} onChange={handleChange} placeholder=\"تأكيد كلمة السر\" required />\r\n            </div>\r\n\r\n            <div className=\"input-group\">\r\n                <select name=\"role\" value={formData.role} onChange={handleChange} required>\r\n                    <option value=\"\">اختر نوع المستخدم</option>\r\n                    <option value=\"admin\">مدير</option>\r\n                    <option value=\"user\">مستخدم</option>\r\n                </select>\r\n            </div>\r\n\r\n            {error && <p className=\"error-message\">{error}</p>}\r\n\r\n            <button disabled={btnEnabel} type=\"submit\">{btnEnabel ? \"جاري الاضافه ...\":\"إضافة مستخدم جديد \"}</button>\r\n            <button type=\"button\" onClick={() => { navigate(-1) }}>الرجوع</button>\r\n\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default AddUserForm;\r\n"],"names":["ApiHost","AddUserForm","getUsers","useOutletContext","navigate","useNavigate","btnEnabel","setBtnEnabel","useState","formData","setFormData","fullname","user_name","phone_number","password","confirmPassword","role","is_active","error","setError","handleChange","e","target","name","value","_jsxs","className","onSubmit","async","preventDefault","length","token","localStorage","getItem","axios","post","headers","Authorization","alert","console","children","_jsx","type","onChange","placeholder","required","disabled","onClick"],"sourceRoot":""}